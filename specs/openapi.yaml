openapi: 3.0.0
info:
  title: OIF API
  version: 0.1.0
  description: |-
    API specifications for OIF protocol covering quote generation and intent submission.
    Amount fields are strings representing integers (e.g., uint256) to preserve precision across transports.
servers:
  - url: https://api.example.com
tags:
  - name: quotes
    description: Quote generation
  - name: orders
    description: Order management
components:
  schemas:
    Address:
      type: string
      pattern: ^0x0001[a-fA-F0-9]+$
      description: |-
        Cross-chain compatible address format per EIP-7930 version 1 encoded format (0x0001 + chain ID + address) for
        unambiguous cross-chain identification.
    Amount:
      type: string
      pattern: ^[0-9]+$
      description: |-
        Token amounts are encoded as decimal strings to preserve precision for large integers
        (e.g., uint256). Always represents the smallest unit of the token (wei for ETH,
        satoshi for BTC, etc.). No decimals or scientific notation allowed.
    SwapType:
      anyOf:
        - type: string
          enum:
            - exact-input
        - type: string
          enum:
            - exact-output
      default: exact-input
      description: |-
        Defines which amount is fixed in a quote request when one amount is undefined.
        - "exact-input": User specifies exact input amount, provider quotes the output amount
        - "exact-output": User specifies exact output amount, provider quotes the input amount needed
    AssetLockReference:
      type: object
      properties:
        kind:
          anyOf:
            - type: string
              enum:
                - the-compact
            - type: string
              enum:
                - rhinestone
          description: |-
            The locking protocol to use for securing assets
            - "the-compact": The Compact protocol for efficient cross-chain transfers
            - "rhinestone": Rhinestone modular account abstraction framework
        params:
          type: object
          additionalProperties:
            nullable: true
            description: Additional configuration parameters specific to the chosen lock type
          description: Additional configuration parameters specific to the chosen lock type
      required:
        - kind
    OriginSubmission:
      type: object
      properties:
        mode:
          anyOf:
            - type: string
              enum:
                - user
            - type: string
              enum:
                - protocol
          description: |-
            Determines transaction submission responsibility
            - "user": User directly submits and pays gas
            - "protocol": Protocol/relayer submits on user's behalf (gasless for user)
        schemes:
          type: array
          items:
            anyOf:
              - type: string
                enum:
                  - erc-4337
              - type: string
                enum:
                  - permit2
              - type: string
                enum:
                  - erc20-permit
              - type: string
                enum:
                  - eip-3009
          description: |-
            List of supported authorization methods for the transaction
            - "erc-4337": Account abstraction (smart contract wallets)
            - "permit2": Uniswap's Permit2 for token approvals
            - "erc20-permit": EIP-2612 permit for gasless approvals
            - "eip-3009": Transfer with authorization (e.g., USDC)
      required:
        - mode
    Input:
      type: object
      properties:
        user:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: The address providing the input assets
        asset:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: The token/asset being provided as input
        amount:
          type: string
          pattern: ^[0-9]+$
          description: |-
            For quote requests:
            - exact-input: The exact amount user will provide
            - exact-output: minimum amount user will provide. Optional in request for open discovery of the quote
            For direct intents: Always specified
        lock:
          type: object
          properties:
            kind:
              anyOf:
                - type: string
                  enum:
                    - the-compact
                - type: string
                  enum:
                    - rhinestone
              description: |-
                The locking protocol to use for securing assets
                - "the-compact": The Compact protocol for efficient cross-chain transfers
                - "rhinestone": Rhinestone modular account abstraction framework
            params:
              type: object
              additionalProperties:
                nullable: true
                description: Additional configuration parameters specific to the chosen lock type
              description: Additional configuration parameters specific to the chosen lock type
          required:
            - kind
          description: Locking mechanism to use for securing the input assets
      required:
        - user
        - asset
    Output:
      type: object
      properties:
        receiver:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: The address that will receive the output assets
        asset:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: The token/asset to be received as output
        amount:
          type: string
          pattern: ^[0-9]+$
          description: |-
            For quote requests:
            - exact-input: minimum amount user wants to receive. Optional in request for open discovery of the quote
            - exact-output: The exact amount user wants to receive
            For direct intents: Always specified
        calldata:
          type: string
          description: |-
            Encoded function call to be executed when delivering the output,
            enabling composability with other protocols
      required:
        - receiver
        - asset
    QuotePreference:
      anyOf:
        - type: string
          enum:
            - price
        - type: string
          enum:
            - speed
        - type: string
          enum:
            - input-priority
        - type: string
          enum:
            - trust-minimization
      description: |-
        Indicates user's priority when selecting between multiple quotes
        - "price": Optimize for best exchange rate/lowest cost
        - "speed": Optimize for fastest execution time
        - "input-priority": Prefer quotes that use inputs in the order specified
        - "trust-minimization": Prefer quotes with strongest security guarantees
    FailureHandlingMode:
      anyOf:
        - type: string
          enum:
            - refund-automatic
        - type: string
          enum:
            - refund-claim
        - type: string
          enum:
            - needs-new-signature
      description: |-
        Defines how to handle transaction failures or partial fills
        - "refund-automatic": Automatic refund on failure without user action
        - "refund-claim": User must claim refund manually after failure
        - "needs-new-signature": Requires new user signature to retry or refund
    GetQuoteRequest:
      type: object
      properties:
        user:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: |-
            Cross-chain compatible address format per EIP-7930 version 1 encoded format (0x0001 + chain ID + address) for
            unambiguous cross-chain identification.
        intent:
          type: object
          properties:
            intentType:
              type: string
              enum:
                - oif-swap
            inputs:
              type: array
              items:
                type: object
                properties:
                  user:
                    type: string
                    pattern: ^0x0001[a-fA-F0-9]+$
                    description: The address providing the input assets
                  asset:
                    type: string
                    pattern: ^0x0001[a-fA-F0-9]+$
                    description: The token/asset being provided as input
                  amount:
                    type: string
                    pattern: ^[0-9]+$
                    description: |-
                      For quote requests:
                      - exact-input: The exact amount user will provide
                      - exact-output: minimum amount user will provide. Optional in request for open discovery of the quote
                      For direct intents: Always specified
                  lock:
                    type: object
                    properties:
                      kind:
                        anyOf:
                          - type: string
                            enum:
                              - the-compact
                          - type: string
                            enum:
                              - rhinestone
                        description: |-
                          The locking protocol to use for securing assets
                          - "the-compact": The Compact protocol for efficient cross-chain transfers
                          - "rhinestone": Rhinestone modular account abstraction framework
                      params:
                        type: object
                        additionalProperties:
                          nullable: true
                          description: Additional configuration parameters specific to the chosen lock type
                        description: Additional configuration parameters specific to the chosen lock type
                    required:
                      - kind
                    description: Locking mechanism to use for securing the input assets
                required:
                  - user
                  - asset
            outputs:
              type: array
              items:
                type: object
                properties:
                  receiver:
                    type: string
                    pattern: ^0x0001[a-fA-F0-9]+$
                    description: The address that will receive the output assets
                  asset:
                    type: string
                    pattern: ^0x0001[a-fA-F0-9]+$
                    description: The token/asset to be received as output
                  amount:
                    type: string
                    pattern: ^[0-9]+$
                    description: |-
                      For quote requests:
                      - exact-input: minimum amount user wants to receive. Optional in request for open discovery of the quote
                      - exact-output: The exact amount user wants to receive
                      For direct intents: Always specified
                  calldata:
                    type: string
                    description: |-
                      Encoded function call to be executed when delivering the output,
                      enabling composability with other protocols
                required:
                  - receiver
                  - asset
            swapType:
              anyOf:
                - type: string
                  enum:
                    - exact-input
                - type: string
                  enum:
                    - exact-output
              default: exact-input
              description: Determines which amounts are fixed vs quoted
            minValidUntil:
              type: number
            preference:
              anyOf:
                - type: string
                  enum:
                    - price
                - type: string
                  enum:
                    - speed
                - type: string
                  enum:
                    - input-priority
                - type: string
                  enum:
                    - trust-minimization
              description: |-
                Indicates user's priority when selecting between multiple quotes
                - "price": Optimize for best exchange rate/lowest cost
                - "speed": Optimize for fastest execution time
                - "input-priority": Prefer quotes that use inputs in the order specified
                - "trust-minimization": Prefer quotes with strongest security guarantees
            originSubmission:
              type: object
              properties:
                mode:
                  anyOf:
                    - type: string
                      enum:
                        - user
                    - type: string
                      enum:
                        - protocol
                  description: |-
                    Determines transaction submission responsibility
                    - "user": User directly submits and pays gas
                    - "protocol": Protocol/relayer submits on user's behalf (gasless for user)
                schemes:
                  type: array
                  items:
                    anyOf:
                      - type: string
                        enum:
                          - erc-4337
                      - type: string
                        enum:
                          - permit2
                      - type: string
                        enum:
                          - erc20-permit
                      - type: string
                        enum:
                          - eip-3009
                  description: |-
                    List of supported authorization methods for the transaction
                    - "erc-4337": Account abstraction (smart contract wallets)
                    - "permit2": Uniswap's Permit2 for token approvals
                    - "erc20-permit": EIP-2612 permit for gasless approvals
                    - "eip-3009": Transfer with authorization (e.g., USDC)
              required:
                - mode
            failureHandling:
              type: array
              items:
                anyOf:
                  - type: string
                    enum:
                      - refund-automatic
                  - type: string
                    enum:
                      - refund-claim
                  - type: string
                    enum:
                      - needs-new-signature
                description: |-
                  Defines how to handle transaction failures or partial fills
                  - "refund-automatic": Automatic refund on failure without user action
                  - "refund-claim": User must claim refund manually after failure
                  - "needs-new-signature": Requires new user signature to retry or refund
            partialFill:
              type: boolean
            metadata:
              type: object
              additionalProperties:
                nullable: true
          required:
            - intentType
            - inputs
            - outputs
        supportedTypes:
          type: array
          items:
            type: string
      required:
        - user
        - intent
        - supportedTypes
    OifEscrowOrder:
      type: object
      properties:
        type:
          type: string
          enum:
            - oif-escrow-v0
        payload:
          type: object
          properties:
            signatureType:
              type: string
              enum:
                - eip712
            domain:
              type: object
              additionalProperties:
                nullable: true
            primaryType:
              type: string
            message:
              type: object
              additionalProperties:
                nullable: true
          required:
            - signatureType
            - domain
            - primaryType
            - message
      required:
        - type
        - payload
    OifResourceLockOrder:
      type: object
      properties:
        type:
          type: string
          enum:
            - oif-resource-lock-v0
        payload:
          type: object
          properties:
            signatureType:
              type: string
              enum:
                - eip712
            domain:
              type: object
              additionalProperties:
                nullable: true
            primaryType:
              type: string
            message:
              type: object
              additionalProperties:
                nullable: true
          required:
            - signatureType
            - domain
            - primaryType
            - message
      required:
        - type
        - payload
    Oif3009Order:
      type: object
      properties:
        type:
          type: string
          enum:
            - oif-3009-v0
        payload:
          type: object
          properties:
            signatureType:
              type: string
              enum:
                - eip712
            domain:
              type: object
              additionalProperties:
                nullable: true
            primaryType:
              type: string
            message:
              type: object
              additionalProperties:
                nullable: true
          required:
            - signatureType
            - domain
            - primaryType
            - message
        metadata:
          type: object
          additionalProperties:
            nullable: true
      required:
        - type
        - payload
        - metadata
    OifGenericOrder:
      type: object
      properties:
        type:
          type: string
          enum:
            - oif-generic-v0
        payload:
          type: object
          additionalProperties:
            nullable: true
      required:
        - type
        - payload
    Order:
      anyOf:
        - type: object
          properties:
            type:
              type: string
              enum:
                - oif-escrow-v0
            payload:
              type: object
              properties:
                signatureType:
                  type: string
                  enum:
                    - eip712
                domain:
                  type: object
                  additionalProperties:
                    nullable: true
                primaryType:
                  type: string
                message:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - signatureType
                - domain
                - primaryType
                - message
          required:
            - type
            - payload
        - type: object
          properties:
            type:
              type: string
              enum:
                - oif-resource-lock-v0
            payload:
              type: object
              properties:
                signatureType:
                  type: string
                  enum:
                    - eip712
                domain:
                  type: object
                  additionalProperties:
                    nullable: true
                primaryType:
                  type: string
                message:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - signatureType
                - domain
                - primaryType
                - message
          required:
            - type
            - payload
        - type: object
          properties:
            type:
              type: string
              enum:
                - oif-3009-v0
            payload:
              type: object
              properties:
                signatureType:
                  type: string
                  enum:
                    - eip712
                domain:
                  type: object
                  additionalProperties:
                    nullable: true
                primaryType:
                  type: string
                message:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - signatureType
                - domain
                - primaryType
                - message
            metadata:
              type: object
              additionalProperties:
                nullable: true
          required:
            - type
            - payload
            - metadata
        - type: object
          properties:
            type:
              type: string
              enum:
                - oif-generic-v0
            payload:
              type: object
              additionalProperties:
                nullable: true
          required:
            - type
            - payload
      description: |-
        Represents all possible order types supported by the OIF protocol.
        Each order type has different security and execution characteristics.
    Quote:
      type: object
      properties:
        order:
          anyOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-escrow-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
              required:
                - type
                - payload
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-resource-lock-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
              required:
                - type
                - payload
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-3009-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - type
                - payload
                - metadata
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-generic-v0
                payload:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - type
                - payload
          description: |-
            Represents all possible order types supported by the OIF protocol.
            Each order type has different security and execution characteristics.
        validUntil:
          type: number
        eta:
          type: number
        quoteId:
          type: string
        provider:
          type: string
        failureHandling:
          anyOf:
            - type: string
              enum:
                - refund-automatic
            - type: string
              enum:
                - refund-claim
            - type: string
              enum:
                - needs-new-signature
          description: |-
            Defines how to handle transaction failures or partial fills
            - "refund-automatic": Automatic refund on failure without user action
            - "refund-claim": User must claim refund manually after failure
            - "needs-new-signature": Requires new user signature to retry or refund
        partialFill:
          type: boolean
        metadata:
          type: object
          additionalProperties:
            nullable: true
      required:
        - order
        - failureHandling
        - partialFill
    GetQuoteResponse:
      type: object
      properties:
        quotes:
          type: array
          items:
            type: object
            properties:
              order:
                anyOf:
                  - type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - oif-escrow-v0
                      payload:
                        type: object
                        properties:
                          signatureType:
                            type: string
                            enum:
                              - eip712
                          domain:
                            type: object
                            additionalProperties:
                              nullable: true
                          primaryType:
                            type: string
                          message:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - signatureType
                          - domain
                          - primaryType
                          - message
                    required:
                      - type
                      - payload
                  - type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - oif-resource-lock-v0
                      payload:
                        type: object
                        properties:
                          signatureType:
                            type: string
                            enum:
                              - eip712
                          domain:
                            type: object
                            additionalProperties:
                              nullable: true
                          primaryType:
                            type: string
                          message:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - signatureType
                          - domain
                          - primaryType
                          - message
                    required:
                      - type
                      - payload
                  - type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - oif-3009-v0
                      payload:
                        type: object
                        properties:
                          signatureType:
                            type: string
                            enum:
                              - eip712
                          domain:
                            type: object
                            additionalProperties:
                              nullable: true
                          primaryType:
                            type: string
                          message:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - signatureType
                          - domain
                          - primaryType
                          - message
                      metadata:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - type
                      - payload
                      - metadata
                  - type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - oif-generic-v0
                      payload:
                        type: object
                        additionalProperties:
                          nullable: true
                    required:
                      - type
                      - payload
                description: |-
                  Represents all possible order types supported by the OIF protocol.
                  Each order type has different security and execution characteristics.
              validUntil:
                type: number
              eta:
                type: number
              quoteId:
                type: string
              provider:
                type: string
              failureHandling:
                anyOf:
                  - type: string
                    enum:
                      - refund-automatic
                  - type: string
                    enum:
                      - refund-claim
                  - type: string
                    enum:
                      - needs-new-signature
                description: |-
                  Defines how to handle transaction failures or partial fills
                  - "refund-automatic": Automatic refund on failure without user action
                  - "refund-claim": User must claim refund manually after failure
                  - "needs-new-signature": Requires new user signature to retry or refund
              partialFill:
                type: boolean
              metadata:
                type: object
                additionalProperties:
                  nullable: true
            required:
              - order
              - failureHandling
              - partialFill
          description: List of available quotes, may be empty if no quotes are available
      required:
        - quotes
    PostOrderRequest:
      type: object
      properties:
        order:
          anyOf:
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-escrow-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
              required:
                - type
                - payload
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-resource-lock-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
              required:
                - type
                - payload
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-3009-v0
                payload:
                  type: object
                  properties:
                    signatureType:
                      type: string
                      enum:
                        - eip712
                    domain:
                      type: object
                      additionalProperties:
                        nullable: true
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - signatureType
                    - domain
                    - primaryType
                    - message
                metadata:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - type
                - payload
                - metadata
            - type: object
              properties:
                type:
                  type: string
                  enum:
                    - oif-generic-v0
                payload:
                  type: object
                  additionalProperties:
                    nullable: true
              required:
                - type
                - payload
          description: EIP-712 typed data for a gasless cross-chain order
        signature:
          type: array
          items:
            type: number
          description: EIP-712 signature or equivalent as array of bytes
        quoteId:
          type: string
          description: Optional quote identifier from a prior Get Quote response
        originSubmission:
          type: object
          properties:
            mode:
              anyOf:
                - type: string
                  enum:
                    - user
                - type: string
                  enum:
                    - protocol
              description: |-
                Determines transaction submission responsibility
                - "user": User directly submits and pays gas
                - "protocol": Protocol/relayer submits on user's behalf (gasless for user)
            schemes:
              type: array
              items:
                anyOf:
                  - type: string
                    enum:
                      - erc-4337
                  - type: string
                    enum:
                      - permit2
                  - type: string
                    enum:
                      - erc20-permit
                  - type: string
                    enum:
                      - eip-3009
              description: |-
                List of supported authorization methods for the transaction
                - "erc-4337": Account abstraction (smart contract wallets)
                - "permit2": Uniswap's Permit2 for token approvals
                - "erc20-permit": EIP-2612 permit for gasless approvals
                - "eip-3009": Transfer with authorization (e.g., USDC)
          required:
            - mode
          description: Optional preference mirrored from quote about who submits and acceptable schemes
      required:
        - order
        - signature
    PostOrderResponse:
      type: object
      properties:
        orderId:
          type: string
        status:
          type: string
          enum:
            - received
            - rejected
            - error
        message:
          type: string
        order:
          type: object
          additionalProperties:
            nullable: true
      required:
        - status
    PostOrderResponseStatus:
      type: string
      enum:
        - received
        - rejected
        - error
    OrderStatus:
      type: string
      enum:
        - created
        - pending
        - executed
        - settled
        - finalized
        - failed
        - refunded
    AssetAmount:
      type: object
      properties:
        asset:
          type: string
          pattern: ^0x0001[a-fA-F0-9]+$
          description: The token/asset identifier, may include chain information
        amount:
          type: string
          pattern: ^[0-9]+$
          description: Token amount in smallest unit (wei, satoshi, etc.)
      required:
        - asset
    SettlementType:
      type: string
      enum:
        - escrow
        - resourceLock
    Settlement:
      type: object
      properties:
        type:
          type: string
          enum:
            - escrow
            - resourceLock
          description: The type of settlement mechanism used for this order
        data:
          type: object
          additionalProperties:
            nullable: true
            description: Additional parameters specific to the settlement type
          description: Additional parameters specific to the settlement type
      required:
        - type
        - data
    GetOrderRequest:
      type: object
      properties:
        id:
          type: string
          description: Unique ID assigned to the order upon submission
      required:
        - id
    GetOrderResponse:
      type: object
      properties:
        id:
          type: string
        status:
          type: string
          enum:
            - created
            - pending
            - executed
            - settled
            - finalized
            - failed
            - refunded
        createdAt:
          type: number
        updatedAt:
          type: number
        quoteId:
          type: string
        inputAmount:
          type: object
          properties:
            asset:
              type: string
              pattern: ^0x0001[a-fA-F0-9]+$
              description: The token/asset identifier, may include chain information
            amount:
              type: string
              pattern: ^[0-9]+$
              description: Token amount in smallest unit (wei, satoshi, etc.)
          required:
            - asset
        outputAmount:
          type: object
          properties:
            asset:
              type: string
              pattern: ^0x0001[a-fA-F0-9]+$
              description: The token/asset identifier, may include chain information
            amount:
              type: string
              pattern: ^[0-9]+$
              description: Token amount in smallest unit (wei, satoshi, etc.)
          required:
            - asset
        settlement:
          type: object
          properties:
            type:
              type: string
              enum:
                - escrow
                - resourceLock
              description: The type of settlement mechanism used for this order
            data:
              type: object
              additionalProperties:
                nullable: true
                description: Additional parameters specific to the settlement type
              description: Additional parameters specific to the settlement type
          required:
            - type
            - data
        fillTransaction:
          type: object
          additionalProperties:
            nullable: true
      required:
        - id
        - status
        - createdAt
        - updatedAt
        - inputAmount
        - outputAmount
        - settlement
  parameters: {}
paths:
  /v1/quotes:
    post:
      summary: Generate executable quotes for requested outputs given available inputs.
      tags:
        - quotes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: string
                  pattern: ^0x0001[a-fA-F0-9]+$
                  description: |-
                    Cross-chain compatible address format per EIP-7930 version 1 encoded format (0x0001 + chain ID + address) for
                    unambiguous cross-chain identification.
                intent:
                  type: object
                  properties:
                    intentType:
                      type: string
                      enum:
                        - oif-swap
                    inputs:
                      type: array
                      items:
                        type: object
                        properties:
                          user:
                            type: string
                            pattern: ^0x0001[a-fA-F0-9]+$
                            description: The address providing the input assets
                          asset:
                            type: string
                            pattern: ^0x0001[a-fA-F0-9]+$
                            description: The token/asset being provided as input
                          amount:
                            type: string
                            pattern: ^[0-9]+$
                            description: |-
                              For quote requests:
                              - exact-input: The exact amount user will provide
                              - exact-output: minimum amount user will provide. Optional in request for open discovery of the quote
                              For direct intents: Always specified
                          lock:
                            type: object
                            properties:
                              kind:
                                anyOf:
                                  - type: string
                                    enum:
                                      - the-compact
                                  - type: string
                                    enum:
                                      - rhinestone
                                description: |-
                                  The locking protocol to use for securing assets
                                  - "the-compact": The Compact protocol for efficient cross-chain transfers
                                  - "rhinestone": Rhinestone modular account abstraction framework
                              params:
                                type: object
                                additionalProperties:
                                  nullable: true
                                  description: Additional configuration parameters specific to the chosen lock type
                                description: Additional configuration parameters specific to the chosen lock type
                            required:
                              - kind
                            description: Locking mechanism to use for securing the input assets
                        required:
                          - user
                          - asset
                    outputs:
                      type: array
                      items:
                        type: object
                        properties:
                          receiver:
                            type: string
                            pattern: ^0x0001[a-fA-F0-9]+$
                            description: The address that will receive the output assets
                          asset:
                            type: string
                            pattern: ^0x0001[a-fA-F0-9]+$
                            description: The token/asset to be received as output
                          amount:
                            type: string
                            pattern: ^[0-9]+$
                            description: |-
                              For quote requests:
                              - exact-input: minimum amount user wants to receive. Optional in request for open discovery of the quote
                              - exact-output: The exact amount user wants to receive
                              For direct intents: Always specified
                          calldata:
                            type: string
                            description: |-
                              Encoded function call to be executed when delivering the output,
                              enabling composability with other protocols
                        required:
                          - receiver
                          - asset
                    swapType:
                      anyOf:
                        - type: string
                          enum:
                            - exact-input
                        - type: string
                          enum:
                            - exact-output
                      default: exact-input
                      description: Determines which amounts are fixed vs quoted
                    minValidUntil:
                      type: number
                    preference:
                      anyOf:
                        - type: string
                          enum:
                            - price
                        - type: string
                          enum:
                            - speed
                        - type: string
                          enum:
                            - input-priority
                        - type: string
                          enum:
                            - trust-minimization
                      description: |-
                        Indicates user's priority when selecting between multiple quotes
                        - "price": Optimize for best exchange rate/lowest cost
                        - "speed": Optimize for fastest execution time
                        - "input-priority": Prefer quotes that use inputs in the order specified
                        - "trust-minimization": Prefer quotes with strongest security guarantees
                    originSubmission:
                      type: object
                      properties:
                        mode:
                          anyOf:
                            - type: string
                              enum:
                                - user
                            - type: string
                              enum:
                                - protocol
                          description: |-
                            Determines transaction submission responsibility
                            - "user": User directly submits and pays gas
                            - "protocol": Protocol/relayer submits on user's behalf (gasless for user)
                        schemes:
                          type: array
                          items:
                            anyOf:
                              - type: string
                                enum:
                                  - erc-4337
                              - type: string
                                enum:
                                  - permit2
                              - type: string
                                enum:
                                  - erc20-permit
                              - type: string
                                enum:
                                  - eip-3009
                          description: |-
                            List of supported authorization methods for the transaction
                            - "erc-4337": Account abstraction (smart contract wallets)
                            - "permit2": Uniswap's Permit2 for token approvals
                            - "erc20-permit": EIP-2612 permit for gasless approvals
                            - "eip-3009": Transfer with authorization (e.g., USDC)
                      required:
                        - mode
                    failureHandling:
                      type: array
                      items:
                        anyOf:
                          - type: string
                            enum:
                              - refund-automatic
                          - type: string
                            enum:
                              - refund-claim
                          - type: string
                            enum:
                              - needs-new-signature
                        description: |-
                          Defines how to handle transaction failures or partial fills
                          - "refund-automatic": Automatic refund on failure without user action
                          - "refund-claim": User must claim refund manually after failure
                          - "needs-new-signature": Requires new user signature to retry or refund
                    partialFill:
                      type: boolean
                    metadata:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - intentType
                    - inputs
                    - outputs
                supportedTypes:
                  type: array
                  items:
                    type: string
              required:
                - user
                - intent
                - supportedTypes
      responses:
        '200':
          description: Quotes successfully generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  quotes:
                    type: array
                    items:
                      type: object
                      properties:
                        order:
                          anyOf:
                            - type: object
                              properties:
                                type:
                                  type: string
                                  enum:
                                    - oif-escrow-v0
                                payload:
                                  type: object
                                  properties:
                                    signatureType:
                                      type: string
                                      enum:
                                        - eip712
                                    domain:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                    primaryType:
                                      type: string
                                    message:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                  required:
                                    - signatureType
                                    - domain
                                    - primaryType
                                    - message
                              required:
                                - type
                                - payload
                            - type: object
                              properties:
                                type:
                                  type: string
                                  enum:
                                    - oif-resource-lock-v0
                                payload:
                                  type: object
                                  properties:
                                    signatureType:
                                      type: string
                                      enum:
                                        - eip712
                                    domain:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                    primaryType:
                                      type: string
                                    message:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                  required:
                                    - signatureType
                                    - domain
                                    - primaryType
                                    - message
                              required:
                                - type
                                - payload
                            - type: object
                              properties:
                                type:
                                  type: string
                                  enum:
                                    - oif-3009-v0
                                payload:
                                  type: object
                                  properties:
                                    signatureType:
                                      type: string
                                      enum:
                                        - eip712
                                    domain:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                    primaryType:
                                      type: string
                                    message:
                                      type: object
                                      additionalProperties:
                                        nullable: true
                                  required:
                                    - signatureType
                                    - domain
                                    - primaryType
                                    - message
                                metadata:
                                  type: object
                                  additionalProperties:
                                    nullable: true
                              required:
                                - type
                                - payload
                                - metadata
                            - type: object
                              properties:
                                type:
                                  type: string
                                  enum:
                                    - oif-generic-v0
                                payload:
                                  type: object
                                  additionalProperties:
                                    nullable: true
                              required:
                                - type
                                - payload
                          description: |-
                            Represents all possible order types supported by the OIF protocol.
                            Each order type has different security and execution characteristics.
                        validUntil:
                          type: number
                        eta:
                          type: number
                        quoteId:
                          type: string
                        provider:
                          type: string
                        failureHandling:
                          anyOf:
                            - type: string
                              enum:
                                - refund-automatic
                            - type: string
                              enum:
                                - refund-claim
                            - type: string
                              enum:
                                - needs-new-signature
                          description: |-
                            Defines how to handle transaction failures or partial fills
                            - "refund-automatic": Automatic refund on failure without user action
                            - "refund-claim": User must claim refund manually after failure
                            - "needs-new-signature": Requires new user signature to retry or refund
                        partialFill:
                          type: boolean
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                      required:
                        - order
                        - failureHandling
                        - partialFill
                    description: List of available quotes, may be empty if no quotes are available
                required:
                  - quotes
        '400':
          description: Malformed request
        '422':
          description: Inputs cannot satisfy requested outputs
  /v1/orders:
    post:
      summary: Submit a previously quoted, signed order for execution.
      tags:
        - orders
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order:
                  anyOf:
                    - type: object
                      properties:
                        type:
                          type: string
                          enum:
                            - oif-escrow-v0
                        payload:
                          type: object
                          properties:
                            signatureType:
                              type: string
                              enum:
                                - eip712
                            domain:
                              type: object
                              additionalProperties:
                                nullable: true
                            primaryType:
                              type: string
                            message:
                              type: object
                              additionalProperties:
                                nullable: true
                          required:
                            - signatureType
                            - domain
                            - primaryType
                            - message
                      required:
                        - type
                        - payload
                    - type: object
                      properties:
                        type:
                          type: string
                          enum:
                            - oif-resource-lock-v0
                        payload:
                          type: object
                          properties:
                            signatureType:
                              type: string
                              enum:
                                - eip712
                            domain:
                              type: object
                              additionalProperties:
                                nullable: true
                            primaryType:
                              type: string
                            message:
                              type: object
                              additionalProperties:
                                nullable: true
                          required:
                            - signatureType
                            - domain
                            - primaryType
                            - message
                      required:
                        - type
                        - payload
                    - type: object
                      properties:
                        type:
                          type: string
                          enum:
                            - oif-3009-v0
                        payload:
                          type: object
                          properties:
                            signatureType:
                              type: string
                              enum:
                                - eip712
                            domain:
                              type: object
                              additionalProperties:
                                nullable: true
                            primaryType:
                              type: string
                            message:
                              type: object
                              additionalProperties:
                                nullable: true
                          required:
                            - signatureType
                            - domain
                            - primaryType
                            - message
                        metadata:
                          type: object
                          additionalProperties:
                            nullable: true
                      required:
                        - type
                        - payload
                        - metadata
                    - type: object
                      properties:
                        type:
                          type: string
                          enum:
                            - oif-generic-v0
                        payload:
                          type: object
                          additionalProperties:
                            nullable: true
                      required:
                        - type
                        - payload
                  description: EIP-712 typed data for a gasless cross-chain order
                signature:
                  type: array
                  items:
                    type: number
                  description: EIP-712 signature or equivalent as array of bytes
                quoteId:
                  type: string
                  description: Optional quote identifier from a prior Get Quote response
                originSubmission:
                  type: object
                  properties:
                    mode:
                      anyOf:
                        - type: string
                          enum:
                            - user
                        - type: string
                          enum:
                            - protocol
                      description: |-
                        Determines transaction submission responsibility
                        - "user": User directly submits and pays gas
                        - "protocol": Protocol/relayer submits on user's behalf (gasless for user)
                    schemes:
                      type: array
                      items:
                        anyOf:
                          - type: string
                            enum:
                              - erc-4337
                          - type: string
                            enum:
                              - permit2
                          - type: string
                            enum:
                              - erc20-permit
                          - type: string
                            enum:
                              - eip-3009
                      description: |-
                        List of supported authorization methods for the transaction
                        - "erc-4337": Account abstraction (smart contract wallets)
                        - "permit2": Uniswap's Permit2 for token approvals
                        - "erc20-permit": EIP-2612 permit for gasless approvals
                        - "eip-3009": Transfer with authorization (e.g., USDC)
                  required:
                    - mode
                  description: Optional preference mirrored from quote about who submits and acceptable schemes
              required:
                - order
                - signature
      responses:
        '200':
          description: Order accepted
          content:
            application/json:
              schema:
                type: object
                properties:
                  orderId:
                    type: string
                  status:
                    type: string
                    enum:
                      - received
                      - rejected
                      - error
                  message:
                    type: string
                  order:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - status
        '400':
          description: Malformed request
        '422':
          description: Invalid signature or order
  /v1/orders/{id}:
    get:
      summary: Get order details by ID.
      tags:
        - orders
      parameters:
        - schema:
            type: string
            description: Order identifier
          required: true
          description: Order identifier
          name: id
          in: path
      responses:
        '200':
          description: Order details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  status:
                    type: string
                    enum:
                      - created
                      - pending
                      - executed
                      - settled
                      - finalized
                      - failed
                      - refunded
                  createdAt:
                    type: number
                  updatedAt:
                    type: number
                  quoteId:
                    type: string
                  inputAmount:
                    type: object
                    properties:
                      asset:
                        type: string
                        pattern: ^0x0001[a-fA-F0-9]+$
                        description: The token/asset identifier, may include chain information
                      amount:
                        type: string
                        pattern: ^[0-9]+$
                        description: Token amount in smallest unit (wei, satoshi, etc.)
                    required:
                      - asset
                  outputAmount:
                    type: object
                    properties:
                      asset:
                        type: string
                        pattern: ^0x0001[a-fA-F0-9]+$
                        description: The token/asset identifier, may include chain information
                      amount:
                        type: string
                        pattern: ^[0-9]+$
                        description: Token amount in smallest unit (wei, satoshi, etc.)
                    required:
                      - asset
                  settlement:
                    type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - escrow
                          - resourceLock
                        description: The type of settlement mechanism used for this order
                      data:
                        type: object
                        additionalProperties:
                          nullable: true
                          description: Additional parameters specific to the settlement type
                        description: Additional parameters specific to the settlement type
                    required:
                      - type
                      - data
                  fillTransaction:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - id
                  - status
                  - createdAt
                  - updatedAt
                  - inputAmount
                  - outputAmount
                  - settlement
        '404':
          description: Order not found
