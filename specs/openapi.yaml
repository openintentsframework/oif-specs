openapi: 3.0.0
info:
  title: OIF API
  version: 0.1.0
  description: |-
    API specifications for OIF protocol covering quote generation and intent submission.
    Amount fields are strings representing integers (e.g., uint256) to preserve precision across transports.
servers:
  - url: https://api.example.com
tags:
  - name: quote
    description: Quote generation
  - name: intent
    description: Intent submission
components:
  schemas:
    Address:
      type: string
      pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
      description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
    Amount:
      type: string
      pattern: ^[0-9]+$
      description: Integer encoded as a string to preserve precision (e.g., uint256)
    OrderType:
      anyOf:
        - type: string
          enum:
            - swap-buy
        - type: string
          enum:
            - swap-sell
      description: Closed list defining how providers must interpret amounts for swaps. "swap-sell" means exact-input (spend exactly the input amounts). "swap-buy" means exact-output (receive exactly the output amounts). To include more options the API will be extended in the future.
    AssetLockReference:
      type: object
      properties:
        kind:
          anyOf:
            - type: string
              enum:
                - the-compact
            - type: string
              enum:
                - rhinestone
        params:
          type: object
          additionalProperties:
            nullable: true
      required:
        - kind
    AvailableInput:
      type: object
      properties:
        user:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        asset:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        amount:
          type: string
          pattern: ^[0-9]+$
          description: Integer encoded as a string to preserve precision (e.g., uint256)
        lock:
          type: object
          properties:
            kind:
              anyOf:
                - type: string
                  enum:
                    - the-compact
                - type: string
                  enum:
                    - rhinestone
            params:
              type: object
              additionalProperties:
                nullable: true
          required:
            - kind
      required:
        - user
        - asset
        - amount
    RequestedOutput:
      type: object
      properties:
        receiver:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        asset:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        amount:
          type: string
          pattern: ^[0-9]+$
          description: Integer encoded as a string to preserve precision (e.g., uint256)
        calldata:
          type: string
      required:
        - receiver
        - asset
        - amount
    RequestedOutputDetails:
      type: object
      properties:
        user:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        asset:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        amount:
          type: string
          pattern: ^[0-9]+$
          description: Integer encoded as a string to preserve precision (e.g., uint256)
        calldata:
          type: string
      required:
        - user
        - asset
        - amount
    QuotePreference:
      anyOf:
        - type: string
          enum:
            - price
        - type: string
          enum:
            - speed
        - type: string
          enum:
            - input-priority
        - type: string
          enum:
            - trust-minimization
      description: Quote preference type
    GetQuoteRequest:
      type: object
      properties:
        user:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        availableInputs:
          type: array
          items:
            type: object
            properties:
              user:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              asset:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              amount:
                type: string
                pattern: ^[0-9]+$
                description: Integer encoded as a string to preserve precision (e.g., uint256)
              lock:
                type: object
                properties:
                  kind:
                    anyOf:
                      - type: string
                        enum:
                          - the-compact
                      - type: string
                        enum:
                          - rhinestone
                  params:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - kind
            required:
              - user
              - asset
              - amount
        requestedOutputs:
          type: array
          items:
            type: object
            properties:
              receiver:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              asset:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              amount:
                type: string
                pattern: ^[0-9]+$
                description: Integer encoded as a string to preserve precision (e.g., uint256)
              calldata:
                type: string
            required:
              - receiver
              - asset
              - amount
        orderType:
          anyOf:
            - type: string
              enum:
                - swap-buy
            - type: string
              enum:
                - swap-sell
          description: Closed list defining how providers must interpret amounts for swaps. "swap-sell" means exact-input (spend exactly the input amounts). "swap-buy" means exact-output (receive exactly the output amounts). To include more options the API will be extended in the future.
        minValidUntil:
          type: number
        preference:
          anyOf:
            - type: string
              enum:
                - price
            - type: string
              enum:
                - speed
            - type: string
              enum:
                - input-priority
            - type: string
              enum:
                - trust-minimization
          description: Quote preference type
        fillerPerformsOpen:
          type: boolean
      required:
        - user
        - availableInputs
        - requestedOutputs
    Eip712Order:
      type: object
      properties:
        domain:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
        primaryType:
          type: string
        message:
          type: object
          additionalProperties:
            nullable: true
      required:
        - domain
        - primaryType
        - message
    QuoteDetails:
      type: object
      properties:
        requestedOutputs:
          type: array
          items:
            type: object
            properties:
              user:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              asset:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              amount:
                type: string
                pattern: ^[0-9]+$
                description: Integer encoded as a string to preserve precision (e.g., uint256)
              calldata:
                type: string
            required:
              - user
              - asset
              - amount
        availableInputs:
          type: array
          items:
            type: object
            properties:
              user:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              asset:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              amount:
                type: string
                pattern: ^[0-9]+$
                description: Integer encoded as a string to preserve precision (e.g., uint256)
              lockType:
                type: string
                enum:
                  - the-compact
            required:
              - user
              - asset
              - amount
      required:
        - requestedOutputs
        - availableInputs
    Quote:
      type: object
      properties:
        orders:
          type: array
          items:
            type: object
            properties:
              domain:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
              primaryType:
                type: string
              message:
                type: object
                additionalProperties:
                  nullable: true
            required:
              - domain
              - primaryType
              - message
        details:
          type: object
          properties:
            requestedOutputs:
              type: array
              items:
                type: object
                properties:
                  user:
                    type: string
                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                  asset:
                    type: string
                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                  amount:
                    type: string
                    pattern: ^[0-9]+$
                    description: Integer encoded as a string to preserve precision (e.g., uint256)
                  calldata:
                    type: string
                required:
                  - user
                  - asset
                  - amount
            availableInputs:
              type: array
              items:
                type: object
                properties:
                  user:
                    type: string
                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                  asset:
                    type: string
                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                  amount:
                    type: string
                    pattern: ^[0-9]+$
                    description: Integer encoded as a string to preserve precision (e.g., uint256)
                  lockType:
                    type: string
                    enum:
                      - the-compact
                required:
                  - user
                  - asset
                  - amount
          required:
            - requestedOutputs
            - availableInputs
        validUntil:
          type: number
        eta:
          type: number
        quoteId:
          type: string
        provider:
          type: string
      required:
        - orders
        - details
        - quoteId
        - provider
    GetQuoteResponse:
      type: object
      properties:
        quotes:
          type: array
          items:
            type: object
            properties:
              orders:
                type: array
                items:
                  type: object
                  properties:
                    domain:
                      type: string
                      pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                      description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                    primaryType:
                      type: string
                    message:
                      type: object
                      additionalProperties:
                        nullable: true
                  required:
                    - domain
                    - primaryType
                    - message
              details:
                type: object
                properties:
                  requestedOutputs:
                    type: array
                    items:
                      type: object
                      properties:
                        user:
                          type: string
                          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                        asset:
                          type: string
                          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                        amount:
                          type: string
                          pattern: ^[0-9]+$
                          description: Integer encoded as a string to preserve precision (e.g., uint256)
                        calldata:
                          type: string
                      required:
                        - user
                        - asset
                        - amount
                  availableInputs:
                    type: array
                    items:
                      type: object
                      properties:
                        user:
                          type: string
                          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                        asset:
                          type: string
                          pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                          description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                        amount:
                          type: string
                          pattern: ^[0-9]+$
                          description: Integer encoded as a string to preserve precision (e.g., uint256)
                        lockType:
                          type: string
                          enum:
                            - the-compact
                      required:
                        - user
                        - asset
                        - amount
                required:
                  - requestedOutputs
                  - availableInputs
              validUntil:
                type: number
              eta:
                type: number
              quoteId:
                type: string
              provider:
                type: string
            required:
              - orders
              - details
              - quoteId
              - provider
      required:
        - quotes
    IntentRequest:
      type: object
      properties:
        order:
          type: object
          additionalProperties:
            nullable: true
        signature:
          type: object
          additionalProperties:
            nullable: true
        quoteId:
          type: string
        provider:
          type: string
        failureHandling:
          anyOf:
            - type: string
              enum:
                - retry
            - type: string
              enum:
                - refund-instant
            - type: string
              enum:
                - refund-claim
            - type: string
              enum:
                - needs-new-signature
            - type: object
              properties:
                partialFill:
                  type: boolean
                remainder:
                  anyOf:
                    - type: string
                      enum:
                        - retry
                    - type: string
                      enum:
                        - refund-instant
                    - type: string
                      enum:
                        - refund-claim
                    - type: string
                      enum:
                        - needs-new-signature
              required:
                - remainder
      required:
        - order
        - signature
        - provider
        - failureHandling
    IntentResponse:
      type: object
      properties:
        orderId:
          type: string
        status:
          type: string
          enum:
            - received
            - rejected
            - error
        message:
          type: string
        order:
          type: object
          additionalProperties:
            nullable: true
      required:
        - status
    IntentResponseStatus:
      type: string
      enum:
        - received
        - rejected
        - error
  parameters: {}
paths:
  /v1/quote:
    post:
      summary: Generate executable quotes for requested outputs given available inputs.
      tags:
        - quote
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: string
                  pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                  description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                availableInputs:
                  type: array
                  items:
                    type: object
                    properties:
                      user:
                        type: string
                        pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                        description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                      asset:
                        type: string
                        pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                        description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                      amount:
                        type: string
                        pattern: ^[0-9]+$
                        description: Integer encoded as a string to preserve precision (e.g., uint256)
                      lock:
                        type: object
                        properties:
                          kind:
                            anyOf:
                              - type: string
                                enum:
                                  - the-compact
                              - type: string
                                enum:
                                  - rhinestone
                          params:
                            type: object
                            additionalProperties:
                              nullable: true
                        required:
                          - kind
                    required:
                      - user
                      - asset
                      - amount
                requestedOutputs:
                  type: array
                  items:
                    type: object
                    properties:
                      receiver:
                        type: string
                        pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                        description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                      asset:
                        type: string
                        pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                        description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                      amount:
                        type: string
                        pattern: ^[0-9]+$
                        description: Integer encoded as a string to preserve precision (e.g., uint256)
                      calldata:
                        type: string
                    required:
                      - receiver
                      - asset
                      - amount
                orderType:
                  anyOf:
                    - type: string
                      enum:
                        - swap-buy
                    - type: string
                      enum:
                        - swap-sell
                  description: Closed list defining how providers must interpret amounts for swaps. "swap-sell" means exact-input (spend exactly the input amounts). "swap-buy" means exact-output (receive exactly the output amounts). To include more options the API will be extended in the future.
                minValidUntil:
                  type: number
                preference:
                  anyOf:
                    - type: string
                      enum:
                        - price
                    - type: string
                      enum:
                        - speed
                    - type: string
                      enum:
                        - input-priority
                    - type: string
                      enum:
                        - trust-minimization
                  description: Quote preference type
                fillerPerformsOpen:
                  type: boolean
              required:
                - user
                - availableInputs
                - requestedOutputs
      responses:
        '200':
          description: Quotes successfully generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  quotes:
                    type: array
                    items:
                      type: object
                      properties:
                        orders:
                          type: array
                          items:
                            type: object
                            properties:
                              domain:
                                type: string
                                pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                                description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                              primaryType:
                                type: string
                              message:
                                type: object
                                additionalProperties:
                                  nullable: true
                            required:
                              - domain
                              - primaryType
                              - message
                        details:
                          type: object
                          properties:
                            requestedOutputs:
                              type: array
                              items:
                                type: object
                                properties:
                                  user:
                                    type: string
                                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                                  asset:
                                    type: string
                                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                                  amount:
                                    type: string
                                    pattern: ^[0-9]+$
                                    description: Integer encoded as a string to preserve precision (e.g., uint256)
                                  calldata:
                                    type: string
                                required:
                                  - user
                                  - asset
                                  - amount
                            availableInputs:
                              type: array
                              items:
                                type: object
                                properties:
                                  user:
                                    type: string
                                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                                  asset:
                                    type: string
                                    pattern: ^0x[a-fA-F0-9]{40}(@eip155:[0-9]+#[a-fA-F0-9]{8})?$
                                    description: ERC-7930 interoperable address format (address@chain#checksum or plain Ethereum address)
                                  amount:
                                    type: string
                                    pattern: ^[0-9]+$
                                    description: Integer encoded as a string to preserve precision (e.g., uint256)
                                  lockType:
                                    type: string
                                    enum:
                                      - the-compact
                                required:
                                  - user
                                  - asset
                                  - amount
                          required:
                            - requestedOutputs
                            - availableInputs
                        validUntil:
                          type: number
                        eta:
                          type: number
                        quoteId:
                          type: string
                        provider:
                          type: string
                      required:
                        - orders
                        - details
                        - quoteId
                        - provider
                required:
                  - quotes
        '400':
          description: Malformed request
        '422':
          description: Inputs cannot satisfy requested outputs
  /v1/intent:
    post:
      summary: Submit a previously quoted, signed order for execution.
      tags:
        - intent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order:
                  type: object
                  additionalProperties:
                    nullable: true
                signature:
                  type: object
                  additionalProperties:
                    nullable: true
                quoteId:
                  type: string
                provider:
                  type: string
                failureHandling:
                  anyOf:
                    - type: string
                      enum:
                        - retry
                    - type: string
                      enum:
                        - refund-instant
                    - type: string
                      enum:
                        - refund-claim
                    - type: string
                      enum:
                        - needs-new-signature
                    - type: object
                      properties:
                        partialFill:
                          type: boolean
                        remainder:
                          anyOf:
                            - type: string
                              enum:
                                - retry
                            - type: string
                              enum:
                                - refund-instant
                            - type: string
                              enum:
                                - refund-claim
                            - type: string
                              enum:
                                - needs-new-signature
                      required:
                        - remainder
              required:
                - order
                - signature
                - provider
                - failureHandling
      responses:
        '200':
          description: Intent accepted
          content:
            application/json:
              schema:
                type: object
                properties:
                  orderId:
                    type: string
                  status:
                    type: string
                    enum:
                      - received
                      - rejected
                      - error
                  message:
                    type: string
                  order:
                    type: object
                    additionalProperties:
                      nullable: true
                required:
                  - status
        '400':
          description: Malformed request
        '422':
          description: Invalid signature or order
